<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="mdl/material.min.css">
        <link rel="stylesheet" href="index.css">
        <script src="mdl/material.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <script src="mdl/material.min.js"></script>
        <script src="blockly/blockly_compressed.js"></script>
        <script src="blockly/python_compressed.js"></script>
        <script src="blockly/blocks_compressed.js"></script>
        <script src="blockly/generators/python/ev3.js"></script>
        <script src="blockly/blocks/ev3.js"></script>
        <script src="blockly/msg/js/en.js"></script>
        <script src="main.js"></script>
    </head>
    <body>
            <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
                    <header class="mdl-layout__header"> 
                      <div class="mdl-layout__header-row">
                        <!-- Title -->
                        <span class="mdl-layout-title">evScript</span>
                        <div class="mdl-layout-spacer"></div>
                        <div id="playButton">
                            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--mini-fab mdl-button--colored" onclick="deployCodeToBot()">
                                <i class="material-icons">play_arrow</i>
                            </button>
                        </div>
                        <div id="loadingIcon">
                            <div class="mdl-spinner mdl-js-spinner is-active"></div>
                        </div>
                      </div>
                      <!-- Tabs -->
                      <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
                        <a href="#scroll-tab-1" class="mdl-layout__tab is-active">Editor</a>
                        <a href="#scroll-tab-2" class="mdl-layout__tab">Configure</a>
                      </div>
                    </header>
                    <main class="mdl-layout__content">
                      <section class="mdl-layout__tab-panel is-active" id="scroll-tab-1">
                        <div class="page-content"><div id="blocklyDiv" style="height: 85vh; width: 100%;"></div></div>
                      </section>
                      <section class="mdl-layout__tab-panel" id="scroll-tab-2">
                        <div class="page-content">
                            <form action="#">
                                <div class="mdl-textfield mdl-js-textfield">
                                    <input class="mdl-textfield__input" type="text" id="hostip">
                                    <label class="mdl-textfield__label" for="hostip">Brick IP Address</label>
                                </div>
                            </form>
                            <form action="#">
                                <div class="mdl-textfield mdl-js-textfield">
                                    <input class="mdl-textfield__input" type="text" id="pname">
                                    <label class="mdl-textfield__label" for="pname">Program Name</label>
                                </div>
                            </form>
                        </div>
                      </section>
                    </main>
                  </div>
        <xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none;">
            <block type="tank_drive">
              <field name="left_output">OUTPUT_B</field>
              <field name="right_output">OUTPUT_C</field>
            </block>
            <block type="drive_for_seconds">
              <value name="left_percent">
                <block type="math_number">
                  <field name="NUM">50</field>
                </block>
              </value>
              <value name="right_percent">
                <block type="math_number">
                  <field name="NUM">50</field>
                </block>
              </value>
              <value name="seconds">
                <block type="math_number">
                  <field name="NUM">1</field>
                </block>
              </value>
            </block>
            <block type="math_number">
              <field name="NUM">0</field>
            </block>
        </xml>
    </body>
    <script>

        document.getElementById('loadingIcon').style.display = "none";

        var workspace = Blockly.inject('blocklyDiv',
            {toolbox: document.getElementById('toolbox'),
                zoom:
                    {controls: true,
                    wheel: true,
                    startScale: 1.0,
                    maxScale: 3,
                    minScale: 0.3,
                    scaleSpeed: 1.2},
                trashcan: true});


        function getHostName(){
            return document.getElementById('hostip').value;
        }
        function getFileName(){
            return document.getElementById('pname').value;
        }

        function startLoading(){
            document.getElementById('playButton').style.display = "none";
            document.getElementById('loadingIcon').style.display = "block";
        }

        function stopLoading(){
            document.getElementById('playButton').style.display = "block";
            document.getElementById('loadingIcon').style.display = "none";
        }


    </script>
</html>